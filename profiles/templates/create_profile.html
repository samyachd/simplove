{% block title %}Dites nous en plus sur vous!{% endblock %}
{% block content %}
<form method="post" id="MemberProfileForm">
    {% csrf_token %}
  <div class="form-step active">
    {{ form.gender.errors }}
    {{ form.gender.label_tag }}
    {{ form.gender }}
    <button type="button" class="btn btn-primary next-step">Suivant</button>
  </div>

   <div class="form-step">
    {{ form.orientation.errors }}
    {{ form.orientation.label_tag }}
    {{ form.orientation }}
    <button type="button" class="btn btn-primary next-step">Suivant</button>
  </div>

  <div class="form-step">
    {{ form.age.errors }}
    {{ form.age.label_tag }}
    {{ form.age }}
    <button type="button" class="btn btn-primary next-step">Suivant</button>
  </div>

<div class="form-step">
    {{ form.location.errors }}
    {{ form.location.label_tag }}
    {{ form.location }}
    <button type="button" class="btn btn-primary next-step">Suivant</button>
  </div>

   <div class="form-step">
    {{ form.interest.errors }}
    {{ form.interest.label_tag }}
    {{ form.interest }}
    <button type="button" class="btn btn-primary next-step">Suivant</button>
  </div>

  <div class="form-step">
    {{ form.looking_for.errors }}
    {{ form.looking_for.label_tag }}
    {{ form.looking_for }}
    <button type="button" class="btn btn-primary next-step">Suivant</button>
  </div>
  
  <div class="form-step">
    {{ form.bio.errors }}
    {{ form.bio.label_tag }}
    {{ form.bio }}
    <button type="submit" class="btn btn-success">Terminer</button>
  </div>
</form>

<style>
.form-step { display:none; }
.form-step.active { display:block; }
.is-invalid { border-color: red; }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const steps = document.querySelectorAll('.form-step');
  let currentStep = 0;

  document.querySelectorAll('.next-step').forEach(button => {
    button.addEventListener('click', () => {
      const fields = steps[currentStep].querySelectorAll('input, select, textarea');
      let allFilled = true;

      fields.forEach(field => {
        if (field.hasAttribute('required') && !field.value.trim()) {
          allFilled = false;
          field.classList.add('is-invalid');
        } else {
          field.classList.remove('is-invalid');
        }
      });

      if (!allFilled) {
        alert("Veuillez remplir le(s) champ(s) avant de continuer");
        return;
      }

      if (currentStep + 1 < steps.length) {
        steps[currentStep].classList.remove('active');
        currentStep++;
        steps[currentStep].classList.add('active');
      }
    });
  });
});
</script>

{% endblock %}
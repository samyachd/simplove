{% extends 'base.html' %}

{% block content %}
<div class="login-form-container">
  <h2>Connexion</h2>

  {% if form.errors %}
    <div class="alert alert-danger">
      Votre identifiant et votre mot de passe ne correspondent pas. Merci de réessayer.
    </div>
  {% endif %}

  {% if next %}
    <div class="alert alert-warning">
      {% if user.is_authenticated %}
        Votre compte n’a pas accès à cette page. Pour continuer, connectez-vous avec un compte qui y a accès.
      {% else %}
        Veuillez vous connecter pour voir cette page.
      {% endif %}
    </div>
  {% endif %}

  <form method="post" action="{% url 'users:login' %}">
    {% csrf_token %}

    <div class="form-group">
      {{ form.username.label_tag }}
      {{ form.username }}
    </div>

    <div class="form-group">
      {{ form.password.label_tag }}
      {{ form.password }}
    </div>

    <div class="form-buttons">
      <input type="submit" value="Se connecter" class="btn btn-primary">
      <input type="hidden" name="next" value="{{ next }}">
    </div>
  </form>

  <p class="text-center mt-3"><a href="{% url 'users:password_reset' %}">Mot de passe oublié ?</a></p>
</div>
{% endblock %}

{% extends "base.html" %}
{% block title %}Complétez votre compte{% endblock %}

{% block content %}
<section class="py-5">
  <div class="container">
    <div class="simplove-card" style="max-width: 600px; margin: 0 auto;">
      <h2 class="mb-4 text-center">Complétez votre compte</h2>

      {% if form.errors %}
        <div class="alert alert-danger simplove-alert-danger">
          Une erreur est survenue dans le formulaire. Merci de vérifier les champs.
        </div>
      {% endif %}

      <form method="post" id="AccountForm">
        {% csrf_token %}

        {% for field in form %}
          <div class="simplove-form-group">
            {{ field.label_tag }}
            {{ field }}
            {% if field.errors %}
              <div class="text-danger mt-1">{{ field.errors }}</div>
            {% endif %}
          </div>
        {% endfor %}

        <button type="submit" class="simplove-btn simplove-btn--success simplove-btn--block">
          Terminer
        </button>
      </form>
    </div>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const form = document.getElementById('AccountForm');
  form.addEventListener('submit', e => {
    const fields = form.querySelectorAll('input, select, textarea');
    let ok = true;
    fields.forEach(el => {
      if (el.hasAttribute('required') && !el.value.trim()) {
        el.classList.add('is-invalid');
        ok = false;
      } else {
        el.classList.remove('is-invalid');
      }
    });
    if (!ok) {
      e.preventDefault();
      alert('Veuillez remplir tous les champs requis.');
    }
  });
});
</script>
{% endblock %}